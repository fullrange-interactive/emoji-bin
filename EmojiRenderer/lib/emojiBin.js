$("document").ready(function() {
var emojisTextures = [
"images/Selected/emoji-0000.png",
"images/Selected/emoji-0001.png",
"images/Selected/emoji-0002.png",
"images/Selected/emoji-0003.png",
"images/Selected/emoji-0004.png",
"images/Selected/emoji-0005.png",
"images/Selected/emoji-0006.png",
"images/Selected/emoji-0007.png",
"images/Selected/emoji-0008.png",
"images/Selected/emoji-0009.png",
"images/Selected/emoji-0010.png",
"images/Selected/emoji-0011.png",
"images/Selected/emoji-0012.png",
"images/Selected/emoji-0013.png",
"images/Selected/emoji-0014.png",
"images/Selected/emoji-0015.png",
"images/Selected/emoji-0016.png",
"images/Selected/emoji-0017.png",
"images/Selected/emoji-0018.png",
"images/Selected/emoji-0019.png",
"images/Selected/emoji-0020.png",
"images/Selected/emoji-0021.png",
"images/Selected/emoji-0022.png",
"images/Selected/emoji-0023.png",
"images/Selected/emoji-0024.png",
"images/Selected/emoji-0025.png",
"images/Selected/emoji-0026.png",
"images/Selected/emoji-0027.png",
"images/Selected/emoji-0028.png",
"images/Selected/emoji-0029.png",
"images/Selected/emoji-0030.png",
"images/Selected/emoji-0031.png",
"images/Selected/emoji-0032.png",
"images/Selected/emoji-0033.png",
"images/Selected/emoji-0034.png",
"images/Selected/emoji-0035.png",
"images/Selected/emoji-0036.png",
"images/Selected/emoji-0037.png",
"images/Selected/emoji-0038.png",
"images/Selected/emoji-0039.png",
"images/Selected/emoji-0040.png",
"images/Selected/emoji-0041.png",
"images/Selected/emoji-0042.png",
"images/Selected/emoji-0043.png",
"images/Selected/emoji-0044.png",
"images/Selected/emoji-0045.png",
"images/Selected/emoji-0046.png",
"images/Selected/emoji-0047.png",
"images/Selected/emoji-0048.png",
"images/Selected/emoji-0049.png",
"images/Selected/emoji-0050.png",
"images/Selected/emoji-0051.png",
"images/Selected/emoji-0052.png",
"images/Selected/emoji-0053.png",
"images/Selected/emoji-0054.png",
"images/Selected/emoji-0055.png",
"images/Selected/emoji-0056.png",
"images/Selected/emoji-0057.png",
"images/Selected/emoji-0058.png",
"images/Selected/emoji-0059.png",
"images/Selected/emoji-0060.png",
"images/Selected/emoji-0061.png",
"images/Selected/emoji-0062.png",
"images/Selected/emoji-0063.png",
"images/Selected/emoji-0064.png",
"images/Selected/emoji-0065.png",
"images/Selected/emoji-0066.png",
"images/Selected/emoji-0067.png",
"images/Selected/emoji-0068.png",
"images/Selected/emoji-0069.png",
"images/Selected/emoji-0070.png",
"images/Selected/emoji-0071.png",
"images/Selected/emoji-0072.png",
"images/Selected/emoji-0073.png",
"images/Selected/emoji-0074.png",
"images/Selected/emoji-0075.png",
"images/Selected/emoji-0076.png",
"images/Selected/emoji-0077.png",
"images/Selected/emoji-0078.png",
"images/Selected/emoji-0079.png",
"images/Selected/emoji-0080.png",
"images/Selected/emoji-0081.png",
"images/Selected/emoji-0082.png",
"images/Selected/emoji-0083.png",
"images/Selected/emoji-0084.png",
"images/Selected/emoji-0085.png",
"images/Selected/emoji-0086.png",
"images/Selected/emoji-0087.png",
"images/Selected/emoji-0088.png",
"images/Selected/emoji-0089.png",
"images/Selected/emoji-0090.png",
"images/Selected/emoji-0091.png",
"images/Selected/emoji-0092.png",
"images/Selected/emoji-0093.png",
"images/Selected/emoji-0094.png",
"images/Selected/emoji-0095.png",
"images/Selected/emoji-0096.png",
"images/Selected/emoji-0097.png",
"images/Selected/emoji-0098.png",
"images/Selected/emoji-0099.png",
"images/Selected/emoji-0100.png",
"images/Selected/emoji-0101.png",
"images/Selected/emoji-0102.png",
"images/Selected/emoji-0103.png",
"images/Selected/emoji-0104.png",
"images/Selected/emoji-0105.png",
"images/Selected/emoji-0106.png",
"images/Selected/emoji-0107.png",
"images/Selected/emoji-0108.png",
"images/Selected/emoji-0109.png",
"images/Selected/emoji-0110.png",
"images/Selected/emoji-0111.png",
"images/Selected/emoji-0112.png",
"images/Selected/emoji-0113.png",
"images/Selected/emoji-0114.png",
"images/Selected/emoji-0115.png",
"images/Selected/emoji-0116.png",
"images/Selected/emoji-0117.png",
"images/Selected/emoji-0118.png",
"images/Selected/emoji-0119.png",
"images/Selected/emoji-0120.png",
"images/Selected/emoji-0121.png",
"images/Selected/emoji-0122.png",
"images/Selected/emoji-0123.png",
"images/Selected/emoji-0124.png",
"images/Selected/emoji-0125.png",
"images/Selected/emoji-0126.png",
"images/Selected/emoji-0127.png",
"images/Selected/emoji-0128.png",
"images/Selected/emoji-0129.png",
"images/Selected/emoji-0130.png",
"images/Selected/emoji-0131.png",
"images/Selected/emoji-0132.png",
"images/Selected/emoji-0133.png",
"images/Selected/emoji-0134.png",
"images/Selected/emoji-0135.png",
"images/Selected/emoji-0136.png",
"images/Selected/emoji-0137.png",
"images/Selected/emoji-0138.png",
"images/Selected/emoji-0139.png",
"images/Selected/emoji-0140.png",
"images/Selected/emoji-0141.png",
"images/Selected/emoji-0142.png",
"images/Selected/emoji-0143.png",
"images/Selected/emoji-0144.png",
"images/Selected/emoji-0145.png",
"images/Selected/emoji-0146.png",
"images/Selected/emoji-0147.png",
"images/Selected/emoji-0148.png",
"images/Selected/emoji-0149.png",
"images/Selected/emoji-0150.png",
"images/Selected/emoji-0151.png",
"images/Selected/emoji-0152.png",
"images/Selected/emoji-0153.png",
"images/Selected/emoji-0154.png",
"images/Selected/emoji-0155.png",
"images/Selected/emoji-0156.png",
"images/Selected/emoji-0157.png",
"images/Selected/emoji-0158.png",
"images/Selected/emoji-0159.png",
"images/Selected/emoji-0160.png",
"images/Selected/emoji-0161.png",
"images/Selected/emoji-0162.png",
"images/Selected/emoji-0163.png",
"images/Selected/emoji-0164.png",
"images/Selected/emoji-0165.png",
"images/Selected/emoji-0166.png",
"images/Selected/emoji-0167.png",
"images/Selected/emoji-0168.png",
"images/Selected/emoji-0169.png",
"images/Selected/emoji-0170.png",
"images/Selected/emoji-0171.png",
"images/Selected/emoji-0172.png",
"images/Selected/emoji-0173.png",
"images/Selected/emoji-0174.png",
"images/Selected/emoji-0175.png",
"images/Selected/emoji-0176.png",
"images/Selected/emoji-0177.png",
"images/Selected/emoji-0178.png",
"images/Selected/emoji-0179.png",
"images/Selected/emoji-0180.png",
"images/Selected/emoji-0181.png",
"images/Selected/emoji-0182.png",
"images/Selected/emoji-0183.png",
"images/Selected/emoji-0184.png",
"images/Selected/emoji-0185.png",
"images/Selected/emoji-0186.png",
"images/Selected/emoji-0187.png",
"images/Selected/emoji-0188.png",
"images/Selected/emoji-1000.png",
"images/Selected/emoji-1001.png",
"images/Selected/emoji-1002.png",
"images/Selected/emoji-1003.png",
"images/Selected/emoji-1004.png",
"images/Selected/emoji-1005.png",
"images/Selected/emoji-1006.png",
"images/Selected/emoji-1007.png",
"images/Selected/emoji-1008.png",
"images/Selected/emoji-1009.png",
"images/Selected/emoji-1010.png",
"images/Selected/emoji-1011.png",
"images/Selected/emoji-1012.png",
"images/Selected/emoji-1013.png",
"images/Selected/emoji-1014.png",
"images/Selected/emoji-1015.png",
"images/Selected/emoji-1016.png",
"images/Selected/emoji-1017.png",
"images/Selected/emoji-1018.png",
"images/Selected/emoji-1019.png",
"images/Selected/emoji-1020.png",
"images/Selected/emoji-1021.png",
"images/Selected/emoji-1022.png",
"images/Selected/emoji-1023.png",
"images/Selected/emoji-1024.png",
"images/Selected/emoji-1025.png",
"images/Selected/emoji-1026.png",
"images/Selected/emoji-1027.png",
"images/Selected/emoji-1028.png",
"images/Selected/emoji-1029.png",
"images/Selected/emoji-1030.png",
"images/Selected/emoji-1031.png",
"images/Selected/emoji-1032.png",
"images/Selected/emoji-1033.png",
"images/Selected/emoji-1034.png",
"images/Selected/emoji-1035.png",
"images/Selected/emoji-1036.png",
"images/Selected/emoji-1037.png",
"images/Selected/emoji-1038.png",
"images/Selected/emoji-1039.png",
"images/Selected/emoji-1040.png",
"images/Selected/emoji-1041.png",
"images/Selected/emoji-1042.png",
"images/Selected/emoji-1043.png",
"images/Selected/emoji-1044.png",
"images/Selected/emoji-1045.png",
"images/Selected/emoji-1046.png",
"images/Selected/emoji-1047.png",
"images/Selected/emoji-1048.png",
"images/Selected/emoji-1049.png",
"images/Selected/emoji-1050.png",
"images/Selected/emoji-1051.png",
"images/Selected/emoji-1052.png",
"images/Selected/emoji-1053.png",
"images/Selected/emoji-1054.png",
"images/Selected/emoji-1055.png",
"images/Selected/emoji-1056.png",
"images/Selected/emoji-1057.png",
"images/Selected/emoji-1058.png",
"images/Selected/emoji-1059.png",
"images/Selected/emoji-1060.png",
"images/Selected/emoji-1061.png",
"images/Selected/emoji-1062.png",
"images/Selected/emoji-1063.png",
"images/Selected/emoji-1064.png",
"images/Selected/emoji-1065.png",
"images/Selected/emoji-1066.png",
"images/Selected/emoji-1067.png",
"images/Selected/emoji-1068.png",
"images/Selected/emoji-1069.png",
"images/Selected/emoji-1070.png",
"images/Selected/emoji-1071.png",
"images/Selected/emoji-1072.png",
"images/Selected/emoji-1073.png",
"images/Selected/emoji-1074.png",
"images/Selected/emoji-1075.png",
"images/Selected/emoji-1076.png",
"images/Selected/emoji-1077.png",
"images/Selected/emoji-1078.png",
"images/Selected/emoji-1079.png",
"images/Selected/emoji-1080.png",
"images/Selected/emoji-1081.png",
"images/Selected/emoji-1082.png",
"images/Selected/emoji-1083.png",
"images/Selected/emoji-1084.png",
"images/Selected/emoji-1085.png",
"images/Selected/emoji-1086.png",
"images/Selected/emoji-1087.png",
"images/Selected/emoji-1088.png",
"images/Selected/emoji-1089.png",
"images/Selected/emoji-1090.png",
"images/Selected/emoji-1091.png",
"images/Selected/emoji-1092.png",
"images/Selected/emoji-1093.png",
"images/Selected/emoji-1094.png",
"images/Selected/emoji-1095.png",
"images/Selected/emoji-1096.png",
"images/Selected/emoji-1097.png",
"images/Selected/emoji-1098.png",
"images/Selected/emoji-1099.png",
"images/Selected/emoji-1100.png",
"images/Selected/emoji-1101.png",
"images/Selected/emoji-1102.png",
"images/Selected/emoji-1103.png",
"images/Selected/emoji-1104.png",
"images/Selected/emoji-1105.png",
"images/Selected/emoji-1106.png",
"images/Selected/emoji-1107.png",
"images/Selected/emoji-1108.png",
"images/Selected/emoji-1109.png",
"images/Selected/emoji-1110.png",
"images/Selected/emoji-1111.png",
"images/Selected/emoji-1112.png",
"images/Selected/emoji-1113.png",
"images/Selected/emoji-1114.png",
"images/Selected/emoji-1115.png",
"images/Selected/emoji-2000.png",
"images/Selected/emoji-2001.png",
"images/Selected/emoji-2002.png",
"images/Selected/emoji-2003.png",
"images/Selected/emoji-2004.png",
"images/Selected/emoji-2005.png",
"images/Selected/emoji-2006.png",
"images/Selected/emoji-2007.png",
"images/Selected/emoji-2008.png",
"images/Selected/emoji-2009.png",
"images/Selected/emoji-2010.png",
"images/Selected/emoji-2011.png",
"images/Selected/emoji-2012.png",
"images/Selected/emoji-2013.png",
"images/Selected/emoji-2014.png",
"images/Selected/emoji-2015.png",
"images/Selected/emoji-2016.png",
"images/Selected/emoji-2017.png",
"images/Selected/emoji-2018.png",
"images/Selected/emoji-2019.png",
"images/Selected/emoji-2020.png",
"images/Selected/emoji-2021.png",
"images/Selected/emoji-2022.png",
"images/Selected/emoji-2023.png",
"images/Selected/emoji-2024.png",
"images/Selected/emoji-2025.png",
"images/Selected/emoji-2026.png",
"images/Selected/emoji-2027.png",
"images/Selected/emoji-2028.png",
"images/Selected/emoji-2029.png",
"images/Selected/emoji-2030.png",
"images/Selected/emoji-2031.png",
"images/Selected/emoji-2032.png",
"images/Selected/emoji-2033.png",
"images/Selected/emoji-2034.png",
"images/Selected/emoji-2035.png",
"images/Selected/emoji-2036.png",
"images/Selected/emoji-2037.png",
"images/Selected/emoji-2038.png",
"images/Selected/emoji-2039.png",
"images/Selected/emoji-2040.png",
"images/Selected/emoji-2041.png",
"images/Selected/emoji-2042.png",
"images/Selected/emoji-2043.png",
"images/Selected/emoji-2044.png",
"images/Selected/emoji-2045.png",
"images/Selected/emoji-2046.png",
"images/Selected/emoji-2047.png",
"images/Selected/emoji-2048.png",
"images/Selected/emoji-2049.png",
"images/Selected/emoji-2050.png",
"images/Selected/emoji-2051.png",
"images/Selected/emoji-2052.png",
"images/Selected/emoji-2053.png",
"images/Selected/emoji-2054.png",
"images/Selected/emoji-2055.png",
"images/Selected/emoji-2056.png",
"images/Selected/emoji-2057.png",
"images/Selected/emoji-2058.png",
"images/Selected/emoji-2059.png",
"images/Selected/emoji-2060.png",
"images/Selected/emoji-2061.png",
"images/Selected/emoji-2062.png",
"images/Selected/emoji-2063.png",
"images/Selected/emoji-2064.png",
"images/Selected/emoji-2065.png",
"images/Selected/emoji-2066.png",
"images/Selected/emoji-2067.png",
"images/Selected/emoji-2068.png",
"images/Selected/emoji-2069.png",
"images/Selected/emoji-2070.png",
"images/Selected/emoji-2071.png",
"images/Selected/emoji-2072.png",
"images/Selected/emoji-2073.png",
"images/Selected/emoji-2074.png",
"images/Selected/emoji-2075.png",
"images/Selected/emoji-2076.png",
"images/Selected/emoji-2077.png",
"images/Selected/emoji-2078.png",
"images/Selected/emoji-2079.png",
"images/Selected/emoji-2080.png",
"images/Selected/emoji-2081.png",
"images/Selected/emoji-2082.png",
"images/Selected/emoji-2083.png",
"images/Selected/emoji-2084.png",
"images/Selected/emoji-2085.png",
"images/Selected/emoji-2086.png",
"images/Selected/emoji-2087.png",
"images/Selected/emoji-2088.png",
"images/Selected/emoji-2089.png",
"images/Selected/emoji-2090.png",
"images/Selected/emoji-2091.png",
"images/Selected/emoji-2092.png",
"images/Selected/emoji-2093.png",
"images/Selected/emoji-2094.png",
"images/Selected/emoji-2095.png",
"images/Selected/emoji-2096.png",
"images/Selected/emoji-2097.png",
"images/Selected/emoji-2098.png",
"images/Selected/emoji-2099.png",
"images/Selected/emoji-2100.png",
"images/Selected/emoji-2101.png",
"images/Selected/emoji-2102.png",
"images/Selected/emoji-2103.png",
"images/Selected/emoji-2104.png",
"images/Selected/emoji-2105.png",
"images/Selected/emoji-2106.png",
"images/Selected/emoji-2107.png",
"images/Selected/emoji-2108.png",
"images/Selected/emoji-2109.png",
"images/Selected/emoji-2110.png",
"images/Selected/emoji-2111.png",
"images/Selected/emoji-2112.png",
"images/Selected/emoji-2113.png",
"images/Selected/emoji-2114.png",
"images/Selected/emoji-2115.png",
"images/Selected/emoji-2116.png",
"images/Selected/emoji-2117.png",
"images/Selected/emoji-2118.png",
"images/Selected/emoji-2119.png",
"images/Selected/emoji-2120.png",
"images/Selected/emoji-2121.png",
"images/Selected/emoji-2122.png",
"images/Selected/emoji-2123.png",
"images/Selected/emoji-2124.png",
"images/Selected/emoji-2125.png",
"images/Selected/emoji-2126.png",
"images/Selected/emoji-2127.png",
"images/Selected/emoji-2128.png",
"images/Selected/emoji-2129.png",
"images/Selected/emoji-2130.png",
"images/Selected/emoji-2131.png",
"images/Selected/emoji-2132.png",
"images/Selected/emoji-2133.png",
"images/Selected/emoji-2134.png",
"images/Selected/emoji-2135.png",
"images/Selected/emoji-2136.png",
"images/Selected/emoji-2137.png",
"images/Selected/emoji-2138.png",
"images/Selected/emoji-2139.png",
"images/Selected/emoji-2140.png",
"images/Selected/emoji-2141.png",
"images/Selected/emoji-2142.png",
"images/Selected/emoji-2143.png",
"images/Selected/emoji-2144.png",
"images/Selected/emoji-2145.png",
"images/Selected/emoji-2146.png",
"images/Selected/emoji-2147.png",
"images/Selected/emoji-2148.png",
"images/Selected/emoji-2149.png",
"images/Selected/emoji-2150.png",
"images/Selected/emoji-2151.png",
"images/Selected/emoji-2152.png",
"images/Selected/emoji-2153.png",
"images/Selected/emoji-2154.png",
"images/Selected/emoji-2155.png",
"images/Selected/emoji-2156.png",
"images/Selected/emoji-2157.png",
"images/Selected/emoji-2158.png",
"images/Selected/emoji-2159.png",
"images/Selected/emoji-2160.png",
"images/Selected/emoji-2161.png",
"images/Selected/emoji-2162.png",
"images/Selected/emoji-2163.png",
"images/Selected/emoji-2164.png",
"images/Selected/emoji-2165.png",
"images/Selected/emoji-2166.png",
"images/Selected/emoji-2167.png",
"images/Selected/emoji-2168.png",
"images/Selected/emoji-2169.png",
"images/Selected/emoji-2170.png",
"images/Selected/emoji-2171.png",
"images/Selected/emoji-2172.png",
"images/Selected/emoji-2173.png",
"images/Selected/emoji-2174.png",
"images/Selected/emoji-2175.png",
"images/Selected/emoji-2176.png",
"images/Selected/emoji-2177.png",
"images/Selected/emoji-2178.png",
"images/Selected/emoji-2179.png",
"images/Selected/emoji-2180.png",
"images/Selected/emoji-2181.png",
"images/Selected/emoji-2182.png",
"images/Selected/emoji-2183.png",
"images/Selected/emoji-2184.png",
"images/Selected/emoji-2185.png",
"images/Selected/emoji-2186.png",
"images/Selected/emoji-2187.png",
"images/Selected/emoji-2188.png",
"images/Selected/emoji-2189.png",
"images/Selected/emoji-2190.png",
"images/Selected/emoji-2191.png",
"images/Selected/emoji-2192.png",
"images/Selected/emoji-2193.png",
"images/Selected/emoji-2194.png",
"images/Selected/emoji-2195.png",
"images/Selected/emoji-2196.png",
"images/Selected/emoji-2197.png",
"images/Selected/emoji-2198.png",
"images/Selected/emoji-2199.png",
"images/Selected/emoji-2200.png",
"images/Selected/emoji-2201.png",
"images/Selected/emoji-2202.png",
"images/Selected/emoji-2203.png",
"images/Selected/emoji-2204.png",
"images/Selected/emoji-2205.png",
"images/Selected/emoji-2206.png",
"images/Selected/emoji-2207.png",
"images/Selected/emoji-2208.png",
"images/Selected/emoji-2209.png",
"images/Selected/emoji-2210.png",
"images/Selected/emoji-2211.png",
"images/Selected/emoji-2212.png",
"images/Selected/emoji-2213.png",
"images/Selected/emoji-2214.png",
"images/Selected/emoji-2215.png",
"images/Selected/emoji-2216.png",
"images/Selected/emoji-2217.png",
"images/Selected/emoji-2218.png",
"images/Selected/emoji-2219.png",
"images/Selected/emoji-2220.png",
"images/Selected/emoji-2221.png",
"images/Selected/emoji-2222.png",
"images/Selected/emoji-2223.png",
"images/Selected/emoji-2224.png",
"images/Selected/emoji-2225.png",
"images/Selected/emoji-2226.png",
"images/Selected/emoji-2227.png",
"images/Selected/emoji-2228.png",
"images/Selected/emoji-2229.png",
"images/Selected/emoji-3000.png",
"images/Selected/emoji-3001.png",
"images/Selected/emoji-3002.png",
"images/Selected/emoji-3003.png",
"images/Selected/emoji-3004.png",
"images/Selected/emoji-3005.png",
"images/Selected/emoji-3006.png",
"images/Selected/emoji-3007.png",
"images/Selected/emoji-3008.png",
"images/Selected/emoji-3009.png",
"images/Selected/emoji-4000.png",
"images/Selected/emoji-4001.png",
"images/Selected/emoji-4002.png",
"images/Selected/emoji-4003.png",
"images/Selected/emoji-4004.png",
"images/Selected/emoji-4005.png",
"images/Selected/emoji-4006.png",
"images/Selected/emoji-4007.png",
"images/Selected/emoji-4008.png",
"images/Selected/emoji-4009.png",
"images/Selected/emoji-4010.png",
"images/Selected/emoji-4011.png",
"images/Selected/emoji-4012.png",
"images/Selected/emoji-4013.png",
"images/Selected/emoji-4014.png",
"images/Selected/emoji-4015.png",
"images/Selected/emoji-4016.png",
"images/Selected/emoji-4017.png",
"images/Selected/emoji-4018.png",
"images/Selected/emoji-4019.png",
"images/Selected/emoji-4020.png",
"images/Selected/emoji-4021.png",
"images/Selected/emoji-4022.png",
"images/Selected/emoji-4023.png",
"images/Selected/emoji-4024.png",
"images/Selected/emoji-4025.png",
"images/Selected/emoji-4026.png",
"images/Selected/emoji-4027.png",
"images/Selected/emoji-4028.png",
"images/Selected/emoji-4029.png",
"images/Selected/emoji-4030.png",
"images/Selected/emoji-4031.png",
"images/Selected/emoji-4032.png",
"images/Selected/emoji-4033.png",
"images/Selected/emoji-4034.png",
"images/Selected/emoji-4035.png",
"images/Selected/emoji-4036.png",
"images/Selected/emoji-4037.png",
"images/Selected/emoji-4038.png",
"images/Selected/emoji-4039.png",
"images/Selected/emoji-4040.png",
"images/Selected/emoji-4041.png",
"images/Selected/emoji-4042.png",
"images/Selected/emoji-4043.png",
"images/Selected/emoji-4044.png",
"images/Selected/emoji-4045.png",
"images/Selected/emoji-4046.png",
"images/Selected/emoji-4047.png",
"images/Selected/emoji-4048.png",
"images/Selected/emoji-4049.png",
"images/Selected/emoji-4050.png",
"images/Selected/emoji-4051.png",
"images/Selected/emoji-4052.png",
"images/Selected/emoji-4053.png",
"images/Selected/emoji-4054.png",
"images/Selected/emoji-4055.png",
"images/Selected/emoji-4056.png",
"images/Selected/emoji-4057.png",
"images/Selected/emoji-4058.png",
"images/Selected/emoji-4059.png",
"images/Selected/emoji-4060.png",
"images/Selected/emoji-4061.png",
"images/Selected/emoji-4062.png",
"images/Selected/emoji-4063.png",
"images/Selected/emoji-4064.png",
"images/Selected/emoji-4065.png",
"images/Selected/emoji-4066.png",
"images/Selected/emoji-4067.png",
"images/Selected/emoji-4068.png",
"images/Selected/emoji-4069.png",
"images/Selected/emoji-4070.png",
"images/Selected/emoji-4071.png",
"images/Selected/emoji-4072.png",
"images/Selected/emoji-4073.png",
"images/Selected/emoji-4074.png",
"images/Selected/emoji-4075.png",
"images/Selected/emoji-4076.png",
"images/Selected/emoji-4077.png",
"images/Selected/emoji-4078.png",
"images/Selected/emoji-4079.png",
"images/Selected/emoji-4080.png",
"images/Selected/emoji-4081.png",
"images/Selected/emoji-4082.png",
"images/Selected/emoji-4083.png",
"images/Selected/emoji-4084.png",
"images/Selected/emoji-4085.png",
"images/Selected/emoji-4086.png",
"images/Selected/emoji-4087.png",
"images/Selected/emoji-4088.png",
"images/Selected/emoji-4089.png",
"images/Selected/emoji-4090.png",
"images/Selected/emoji-4091.png",
"images/Selected/emoji-4092.png",
"images/Selected/emoji-4093.png",
"images/Selected/emoji-4094.png",
"images/Selected/emoji-4095.png",
"images/Selected/emoji-4096.png",
"images/Selected/emoji-4097.png",
"images/Selected/emoji-4098.png",
"images/Selected/emoji-4099.png",
"images/Selected/emoji-4100.png",
"images/Selected/emoji-4101.png",
"images/Selected/emoji-4102.png",
"images/Selected/emoji-4103.png",
"images/Selected/emoji-4104.png",
"images/Selected/emoji-4105.png",
"images/Selected/emoji-4106.png",
"images/Selected/emoji-4107.png",
"images/Selected/emoji-4108.png",
"images/Selected/emoji-4109.png",
"images/Selected/emoji-4110.png",
"images/Selected/emoji-4111.png",
"images/Selected/emoji-4112.png",
"images/Selected/emoji-4113.png",
"images/Selected/emoji-4114.png",
"images/Selected/emoji-4115.png",
"images/Selected/emoji-4116.png",
"images/Selected/emoji-4117.png",
"images/Selected/emoji-4118.png",
"images/Selected/emoji-4119.png",
"images/Selected/emoji-4120.png",
"images/Selected/emoji-4121.png",
"images/Selected/emoji-4122.png",
"images/Selected/emoji-4123.png",
"images/Selected/emoji-4124.png",
"images/Selected/emoji-4125.png",
"images/Selected/emoji-4126.png",
"images/Selected/emoji-4127.png",
"images/Selected/emoji-4128.png",
"images/Selected/emoji-4129.png",
"images/Selected/emoji-4130.png",
"images/Selected/emoji-4131.png",
"images/Selected/emoji-4132.png",
"images/Selected/emoji-4133.png",
"images/Selected/emoji-4134.png",
"images/Selected/emoji-4135.png",
"images/Selected/emoji-4136.png",
"images/Selected/emoji-4137.png",
"images/Selected/emoji-4138.png",
"images/Selected/emoji-4139.png",
"images/Selected/emoji-4140.png",
"images/Selected/emoji-4141.png",
"images/Selected/emoji-4142.png",
"images/Selected/emoji-4143.png",
"images/Selected/emoji-4144.png",
"images/Selected/emoji-4145.png",
"images/Selected/emoji-4146.png",
"images/Selected/emoji-4147.png",
"images/Selected/emoji-4148.png",
"images/Selected/emoji-4149.png",
"images/Selected/emoji-4150.png",
"images/Selected/emoji-4151.png",
"images/Selected/emoji-4152.png",
"images/Selected/emoji-4153.png",
"images/Selected/emoji-4154.png",
"images/Selected/emoji-4155.png",
"images/Selected/emoji-4156.png",
"images/Selected/emoji-4157.png",
"images/Selected/emoji-4158.png",
"images/Selected/emoji-4159.png",
"images/Selected/emoji-4160.png",
"images/Selected/emoji-4161.png",
"images/Selected/emoji-4162.png",
"images/Selected/emoji-4163.png",
"images/Selected/emoji-4164.png",
"images/Selected/emoji-4165.png",
"images/Selected/emoji-4166.png",
"images/Selected/emoji-4167.png",
"images/Selected/emoji-4168.png",
"images/Selected/emoji-4169.png",
"images/Selected/emoji-4170.png",
"images/Selected/emoji-4171.png",
"images/Selected/emoji-4172.png",
"images/Selected/emoji-4173.png",
"images/Selected/emoji-4174.png",
"images/Selected/emoji-4175.png",
"images/Selected/emoji-4176.png",
"images/Selected/emoji-4177.png",
"images/Selected/emoji-4178.png",
"images/Selected/emoji-4179.png",
"images/Selected/emoji-4180.png",
"images/Selected/emoji-4181.png",
"images/Selected/emoji-4182.png",
"images/Selected/emoji-4183.png",
"images/Selected/emoji-4184.png",
"images/Selected/emoji-4185.png",
"images/Selected/emoji-4186.png",
"images/Selected/emoji-4187.png",
"images/Selected/emoji-4188.png",
"images/Selected/emoji-4189.png",
"images/Selected/emoji-4190.png",
"images/Selected/emoji-4191.png",
"images/Selected/emoji-4192.png",
"images/Selected/emoji-4193.png",
"images/Selected/emoji-4194.png",
"images/Selected/emoji-4195.png",
"images/Selected/emoji-4196.png",
"images/Selected/emoji-4197.png",
"images/Selected/emoji-4198.png",
"images/Selected/emoji-4199.png",
"images/Selected/emoji-4200.png",
"images/Selected/emoji-4201.png",
"images/Selected/emoji-4202.png",
"images/Selected/emoji-4203.png",
"images/Selected/emoji-4204.png",
"images/Selected/emoji-4205.png",
"images/Selected/emoji-4206.png",
"images/Selected/emoji-4207.png",
"images/Selected/emoji-4208.png"

// 
];

  var maxEmojis = 30;
  var decreaseFactor = 1/2000;
  var minSizeBeforeDispose = 100;

  var baseSize = 24;
  var textureSize = 160;

  var sizeX = $(window).width();
  var sizeY = $(window).height();

  console.log("Creating a "+sizeX+" x "+sizeY+" simulation");

  var $worldSelector = $("#world");

  $worldSelector.css({
    width:sizeX,
    height:sizeY
  });

  var World = Matter.World;
  var Bodies = Matter.Bodies;
  var Engine = Matter.Engine;
  var Composites = Matter.Composites;
  var Composite = Matter.Composite;  
  var Common = Matter.Common;
  var Render = Matter.Render;
  var MouseConstraint = Matter.MouseConstraint;
  

  var engine = Engine.create($worldSelector[0],
  {
    render: {
      options: {
        width:sizeX,
        height:sizeY,
        wireframes: false,
        showAngleIndicator: false,
        background:'transparent'
      }
    }
  });

  var world = engine.world;

  var offset = 15; 
  world.gravity['y'] = -0.1;

  var mouseConstraint = MouseConstraint.create(engine);
  World.add(world, mouseConstraint);    
 
  var boundaries = Matter.Composite.create();
  var emojis = Matter.Composite.create();
  var fragments = Matter.Composite.create();

  World.add(world, boundaries);
  World.add(world, emojis);
  World.add(world, fragments);

  var bodies = [Bodies.rectangle(sizeX/2, -offset, sizeX + 2 * offset, 50, { render:{visible:false}, isStatic: true,restitution: 0.3 }),
    Bodies.rectangle(sizeX/2, sizeY + offset, sizeX + 2 * offset, 50, { render:{visible:false}, isStatic: true,restitution: 0.3 }),
    Bodies.rectangle(sizeX + offset, sizeY/2, 50, sizeY + 2 * offset, { render:{visible:false}, isStatic: true,restitution: 0.3 }),
    Bodies.rectangle(-offset, sizeY/2, 50, sizeY + 2 * offset, { render:{visible:false}, isStatic: true,restitution: 0.3 })];

  for(var k=0;k<bodies.length;k++)
  {
    bodies[k].collisionFilter.group = 0;
    bodies[k].collisionFilter.category = 0b0001;
    bodies[k].collisionFilter.mask = 0b0011; // Dont collide with particles    

    Matter.Composite.add(boundaries,bodies[k]);
  }

  Engine.run(engine);

  window.setInterval(function(){


    var sizeMultiplier = Common.random(20,30)/10; 
    var radius = sizeMultiplier*baseSize/2;

    var posX = (sizeX-2*offset)/2-baseSize*sizeMultiplier;
    var posY = sizeY-baseSize*sizeMultiplier*2-offset;

    var emoji = Bodies.circle(
      posX,
      posY,
      radius,
      {
        density: Common.random(2,10)/10000,//  0.0005,
        frictionAir: 0.003,
        restitution: 0.85,
        friction: 0.003,
        render: {
          sprite: {
            texture: Matter.Common.choose(emojisTextures),
            xScale:baseSize/textureSize*sizeMultiplier,
            yScale:baseSize/textureSize*sizeMultiplier
          }
        }
    });

    Matter.Body.setVelocity(emoji, {x:Common.random(-6,6),y:Common.random(-5,-15)});      
    Matter.Body.setAngularVelocity(emoji, Common.random(-10,10)/40);
    
    emoji.collisionFilter.group = 0;
    emoji.collisionFilter.category = 0b0010;
    emoji.collisionFilter.mask = 0b0111; // Collie with everything    

    Matter.Composite.add(emojis,emoji);

  },300);


  window.setInterval(function(){
    
    var bodies = Composite.allBodies(emojis);

    console.log(bodies.length);

    for (var i = bodies.length-1; i >= 0; i--)
    {
      if(bodies.length > maxEmojis)
      {        
        var fade = 1-((bodies.length - maxEmojis)*decreaseFactor);

        Matter.Body.scale(bodies[i], fade, fade);
        bodies[i].render.sprite.xScale *= fade;
        bodies[i].render.sprite.yScale *= fade;

       // console.log(bodies[i].area);

        if(bodies[i].area < minSizeBeforeDispose)
        {
          Matter.Composite.remove(emojis,bodies[i]);

          for(var j=0;j<10;j++)
          {
            var fragment = Bodies.circle(
              bodies[i].position.x,
              bodies[i].position.y,
              1,
              {
                density: 0.1,
                frictionAir: 0,
                restitution: 1,
                friction: 0,
                render:{
                  fillStyle:'white',
                  strokeStyle:'white',
                  lineWidth:0
                },
                collisionFilter:{
                  group:0,
                  category:0b0100,
                  mask:0b0110
                }
            });

            Matter.Body.setVelocity(fragment, {x:Common.random(-20,20),y:Common.random(-20,20)});      
            
            Matter.Composite.add(fragments,fragment);
          }
        }
      }
    }    


    var bodies = Composite.allBodies(fragments);

    console.log(bodies.length);

    for (var i = bodies.length-1; i >= 0; i--)
    {
      if(bodies[i].position.x < 0 || bodies[i].position.x > sizeX || bodies[i].position.y < 0 || bodies[i].position.y > sizeY )
        Matter.Composite.remove(fragments,bodies[i]);
    }

  },200);

});

